<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GSAP ScrollTrigger Example</title>
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      .content_wrap {
        position: relative;
        width: 100%;
        /* height: 300vh; */
        /* 스크롤 길이 확보 */
        border: 1px solid green;
      }

      .pin_wrap {
        position: relative;
        width: 100%;
        /* height: 100vh; */
        overflow: hidden;
        border: 1px solid blue;
        /* padding: 0 !important; */
      }

      .pin_wrap img {
        width: 100%;
        /* height: 120vh; */
        /* 처음엔 더 크게 (밑으로 숨겨둠) */
        object-fit: cover;
        /* transform: translateY(30%);  */
        /* 시작 위치: 살짝 아래 */
        /* transition: transform 0.3s ease-out; */
      }

      /* 섹션 2 */
      .pin_wrap2 {
        position: relative;
        width: 100%;
        height: 800px;
        background: url("./pc/part2_bottom_bg.png") no-repeat center / contain;
        overflow: hidden;
        border: 1px solid red;
      }

      .pin_wrap2 img {
        position: absolute;
        bottom: 10%;
        left: 50%;
        transform: translateX(-50%);
        width: 10%;
        display: block;
      }
      .sub_cover,
      .sec_cover {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
      }

      .bg {
        width: 100%;
        background-color: beige;
        height: 100vh;
      }
      .bg2 {
        width: 100%;
        background-color: skyblue;
        height: 100vh;
      }
    </style>
  </head>

  <body>
    <div class="bg">테스트</div>
    <div class="content_wrap trigger_cont">
      <div class="section_wc pin_wrap">
        <img
          src="https://img.lfmall.co.kr/file/WAS/display/Planning/107681/pc/part3_top_img.png"
          alt=""
          class="img-responsive"
        />
      </div>
    </div>
    <div class="bg2">테스트 2</div>
    <div class="content_wrap trigger_cont2">
      <div class="section_wc pin_wrap2">
        <img
          src="https://img.lfmall.co.kr/file/WAS/display/Planning/107681/pc/part3_middle_1_cont.png"
          alt=""
          class="img-responsive"
        />
      </div>
    </div>
    <div class="bg2">테스트 2</div>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/ScrollTrigger.min.js"></script>

    <script>
      gsap.registerPlugin(ScrollTrigger);

      window.addEventListener("load", () => {
        const imgHeight =
          document.querySelector(".pin_wrap > img").offsetHeight;

        ScrollTrigger.create({
          trigger: ".pin_wrap",
          start: "top top",
          // end: "+=100%",
          end: "+=" + imgHeight, // 이미지 실제 높이로 고정
          // 고정 유지 길이 (원하는 만큼 조절)
          pin: false,
          pinSpacing: false,
          // markers: true
        });

        // 2) 이미지 ‘아래 → 제자리’ 이동(스크럽)
        gsap.fromTo(
          ".pin_wrap img",
          { yPercent: 500 }, // 시작: 아래
          {
            yPercent: 0,
            ease: "none",
            scrollTrigger: {
              trigger: ".pin_wrap",
              start: "top bottom", // pin_wrap이 뷰포트에 들어오기 시작할 때부터
              end: "top top", // pin 시작 시점까지
              scrub: true,
              // markers: true
            },
          }
        );

        // 섹션 2: 배경은 고정, 내부 이미지만 위로 translate
        gsap.fromTo(
          ".pin_wrap2 img",
          { y: 200 }, // 시작위치 : 200아래
          {
            y: 0, // -100 끝위치는 시작보다 100위
            ease: "none",
            scrollTrigger: {
              trigger: ".pin_wrap2",
              start: "top bottom",
              end: "bottom top",
              scrub: true,
            },
          }
        );
      });

      // 1) pin 전용: 페이지 로드시 pin-spacer가 즉시 생성됨
    </script>
  </body>
</html>
